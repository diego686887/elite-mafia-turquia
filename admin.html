<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Elite Turquia</title>
    <link rel="stylesheet" href="estilo.css">
    <style>
        .sync-info {
            background: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        
        .bin-id {
            font-family: monospace;
            background: #34495e;
            padding: 5px 10px;
            border-radius: 4px;
            word-break: break-all;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        @media (max-width: 768px) {
            .action-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

<div class="admin-panel">
    <h1>üõ°Ô∏è ADMIN - ELITE TURQUIA</h1>
    
    <div class="sync-info">
        <p><strong>ID do Banco Online:</strong></p>
        <p id="binIdDisplay" class="bin-id">Carregando...</p>
        <p><small>Sincroniza√ß√£o autom√°tica a cada 30 segundos</small></p>
    </div>
    
    <h2>‚è∞ CONFIGURAR HOR√ÅRIO</h2>
    <input type="text" id="novoHorario" placeholder="Ex: S√°bado √†s 21:00" 
           value="Sexta-feira √†s 20:00">
    
    <div class="action-buttons">
        <button onclick="salvarHorario()" style="background: #27ae60;">
            üíæ SALVAR HOR√ÅRIO
        </button>
        <button onclick="sincronizarComNuvem()" style="background: #3498db;">
            üîÑ SINCRONIZAR AGORA
        </button>
    </div>
    
    <h2>üë• CANDIDATOS (<span id="contador">0</span>)</h2>
    
    <div class="action-buttons">
        <button onclick="carregarCandidatos()" style="background: #9b59b6;">
            üìã ATUALIZAR LISTA
        </button>
        <button onclick="exportarCSV()" style="background: #f39c12;">
            üì• EXPORTAR CSV
        </button>
    </div>
    
    <ul id="listaCandidatos"></ul>
</div>

<script src="script.js"></script>
<script>
// Mostrar Bin ID quando carregar
document.addEventListener('DOMContentLoaded', function() {
    const binId = localStorage.getItem('jsonbin_id');
    const display = document.getElementById('binIdDisplay');
    if (display) {
        display.textContent = binId || 'N√£o configurado ainda';
    }
});

// Exportar para CSV
async function exportarCSV() {
    const candidatos = JSON.parse(localStorage.getItem("candidatos") || "[]");
    
    if (candidatos.length === 0) {
        alert("N√£o h√° candidatos para exportar!");
        return;
    }
    
    // Criar cabe√ßalho CSV
    let csv = "Nome,Idade,Discord,Cargo,Tiro,P1,Data\n";
    
    candidatos.forEach(c => {
        csv += `"${c.nome}",${c.idade},"${c.discord}","${c.cargo}","${c.tiro}","${c.p1}","${c.dataCadastro}"\n`;
    });
    
    // Criar blob e download
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `candidatos_elite_${new Date().toISOString().split('T')[0]}.csv`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    
    alert(`Exportado ${candidatos.length} candidatos!`);
}
</script>
</body>
</html>
